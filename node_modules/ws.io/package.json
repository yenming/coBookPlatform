{
  "name": "ws.io",
  "version": "0.0.2",
  "author": {
    "name": "fillano",
    "email": "fillano.feng@gmail.com"
  },
  "contributors": [
    {
      "name": "Fillano Feng",
      "email": "fillano.feng@gmail.com"
    }
  ],
  "main": "./lib/ws.io",
  "description": "a simple wrap for ws to make it acts more like Socket.IO",
  "keywords": [
    "WebSocket",
    "ws",
    "Socket.IO"
  ],
  "dependencies": {
    "ws": ">=0.4.21"
  },
  "license": "MIT",
  "engines": {
    "node": ">=0.8"
  },
  "readme": "ws.io\n=====\n\nA simple wrap to node.js ws module and then we can use it in a manner like socket.io. It's really easy to use socket.io but it doesn't support Blob yet. So I write a simple wrap to ws module for this purpose. This is also a part of works from a contest by ithelp.ithome.com.tw.\n\nFeatures:\n---------\n1. trnasfer Blob/ArrayBuffer by put it in an object and emit it just as socket.io\n2. broadcast to all but not me\n3. emit to specified peer by socket.to(socket.id).emit('event', data)\n4. join/leave/in room\n5. in-memory store\n\nLimits:\n-------\n1. can only send one Blob/ArrayBuffer within one emit\n2. the Blob/ArrayBuffer object must be a property of the emitting object in the first level, no deeper\n3. no configuration support\n4. no 3rd party data store support\n5. cannot scale (due to current sockets management and store design)\n6. client support is now through a static url: /ws.io/ws.io.js\n\ninstall\n=======\n\n<pre>\nnpm install ws.io\n</pre>\n\nusage\n=====\na simple echo server. (echo.js)\n<pre>\nvar app = require('http').createServer(handler),\nio = require('./ws.io').listen(app);\napp.listen(8443);\n\nfunction handler (req, res) {\n\tres.setHeader('Content-Type', 'text/html');\n\tres.writeHead(200);\n\tres.end(\n\t\t\"&lt;!DOCTYPE html>\"+\n\t\t\"&lt;html>\"+\n\t\t\"&lt;head>\"+\n\t\t\"&lt;script src='/ws.io/ws.io.js'>&lt;/script>\"+\n\t\t\"&lt;script>\"+\n\t\t\"var socket = io.connect('ws://localhost:8443');\"+\n\t\t\"socket.on('echo', function(data) {\"+\n\t\t\"\talert(data);\"+\n\t\t\"});\"+\n\t\t\"&lt;/script>\"+\n\t\t\"&lt;body>\"+\n\t\t\"&lt;button id='echo'>echo&lt;/button>\"+\n\t\t\"&lt;/body>\"+\n\t\t\"&lt;/html>\"+\n\t\t\"&lt;script>\"+\n\t\t\"var button = document.getElementById('echo');\"+\n\t\t\"button.onclick = function() {\"+\n\t\t\"\tsocket.emit('echo', 'hello echo server.');\"+\n\t\t\"}\"+\n\t\t\"&lt;/script>\"\n\t);\n}\n\nio.sockets.on('connection', function (socket) {\n\tsocket.on('echo', function(data) {\n\t\tsocket.emit('echo', data);\n\t});\n});\n</pre>\n\n\na simple blob sharing through file api. (blob.js)\n<pre>\nvar fs = require('fs'),\nurl = require('url'),\napp = require('http').createServer(function(req, res) {\n\tres.setHeader('Content-Type', 'text/html');\n\tres.writeHead(200);\n\tres.end(\n\t\t\"&lt;!DOCTYPE html>\"+\n\t\t\"&lt;html lang='en'>\"+\n\t\t\"&lt;meta charset='utf-8'>\"+\n\t\t\"&lt;head>\"+\n\t\t\"&lt;style>\"+\n\t\t\"#panel {\"+\n\t\t\"\tborder: solid 1px #336699;\"+\n\t\t\"\tline-height: 20px;\"+\n\t\t\"\tvertical-align: middle;\"+\n\t\t\"\tpadding: 5px;\"+\n\t\t\"\tborder-radius: 5px;\"+\n\t\t\"}\"+\n\t\t\"&lt;/style>\"+\n\t\t\"&lt;script src='/ws.io/ws.io.js'>&lt;/script>\"+\n\t\t\"&lt;/head>\"+\n\t\t\"&lt;body>\"+\n\t\t\"&lt;input type='file' id='files'>&lt;br>\"+\n\t\t\"&lt;div id='panel'>&lt;ul id='list'>&lt;/ul>&lt;/div>\"+\n\t\t\"&lt;/body>\"+\n\t\t\"&lt;/html>\"+\n\t\t\"&lt;script>\"+\n\t\t\"var files = document.getElementById('files');\"+\n\t\t\"var socket = io.connect('ws://localhost:8443');\"+\n\t\t\"function getUrl() {\"+\n\t\t\"\tif(!!window.URL) {\"+\n\t\t\"\t\treturn window.URL;\"+\n\t\t\"\t}\"+\n\t\t\"\tif(!!window.webkitURL) {\"+\n\t\t\"\t\treturn window.webkitURL;\"+\n\t\t\"\t}\"+\n\t\t\"}\"+\n\t\t\"\"+\n\t\t\"files.addEventListener('change', function(e) {\"+\n\t\t\"\tvar URL = getUrl();\"+\n\t\t\"\tif(files.files.length>0) {\"+\n\t\t\"\t\tvar file = files.files[0];\"+\n\t\t\"\t\tif(file.type==='') {\"+\n\t\t\"\t\t\talert('File type unknown. Process stopped.');\"+\n\t\t\"\t\t\treturn false;\"+\n\t\t\"\t\t}\"+\n\t\t\"\t\tvar src = URL.createObjectURL(file);\"+\n\t\t\"\t\tvar a = document.createElement('a');\"+\n\t\t\"\t\ta.href = src;\"+\n\t\t\"\t\ta.innerHTML = file.name;\"+\n\t\t\"\t\ta.target = '_blank';\"+\n\t\t\"\t\tvar li = document.createElement('li');\"+\n\t\t\"\t\tli.appendChild(a);\"+\n\t\t\"\t\tdocument.getElementById('list').appendChild(li);\"+\n\t\t\"\t\tsocket.emit('share', {filename: file.name, type: file.type, file:file});\"+\n\t\t\"\t}\"+\n\t\t\"});\"+\n\t\t\"var fileinfo;\"+\n\t\t\"socket.on('share', function(data) {\"+\n\t\t\"\tvar URL = getUrl();\"+\n\t\t\"\tvar a = document.createElement('a');\"+\n\t\t\"\tvar file = new Blob([data.file], {type:data.type});\"+\n\t\t\"\ta.href = URL.createObjectURL(file);\"+\n\t\t\"\ta.innerHTML = data.filename;\"+\n\t\t\"\ta.target = '_blank';\"+\n\t\t\"\tvar li = document.createElement('li');\"+\n\t\t\"\tli.appendChild(a);\"+\n\t\t\"\tdocument.getElementById('list').appendChild(li);\"+\n\t\t\"});\"+\n\t\t\"&lt;/script>\"\n\t);\n}),\nio = require('ws.io').listen(app);\n\nio.sockets.on('connection', function(socket) {\n\tsocket.on('share', function(data) {\n\t\tsocket.broadcast.emit('share', data);\n\t});\n});\n\napp.listen(8443);\n</pre>",
  "_id": "ws.io@0.0.2",
  "dist": {
    "shasum": "0616f156398f9d748dc47c8a8830588a932315ad",
    "tarball": "https://registry.npmjs.org/ws.io/-/ws.io-0.0.2.tgz"
  },
  "_npmVersion": "1.1.59",
  "_npmUser": {
    "name": "fillano",
    "email": "fillano.feng@gmail.com"
  },
  "maintainers": [
    {
      "name": "fillano",
      "email": "fillano.feng@gmail.com"
    }
  ],
  "directories": {},
  "_shasum": "0616f156398f9d748dc47c8a8830588a932315ad",
  "_resolved": "https://registry.npmjs.org/ws.io/-/ws.io-0.0.2.tgz",
  "_from": "ws.io@*"
}
